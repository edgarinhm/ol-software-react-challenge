import{j as e,F as k,z as O,A as D,t as S,V as T,r as g,U as I,S as V,X as W,Q as f}from"./index-BxDYw-D8.js";import{C}from"./card-Bx_I0eUa.js";import{t as a,S as E,h as H,g as q,i as K}from"./sort-functions-BDT0wpf9.js";const Q="rgb(255, 255, 255)",X="rgb(0, 0, 0)",J="rgb(204, 204, 204)",Y="rgb(199, 23, 23)",Z="rgb(254, 131, 0)",ee="rgb(0, 128, 0)",re="0",te="900",se="1000",ae="1005",oe="1030",ne="1035",le="1040",ie="1050",ge="1100",ce="1200",de="1500",be="950",ue="_container_xmw0h_119",he="_addActionGroup_xmw0h_125",me="_tableGridResponsive_xmw0h_180",ye="_stretchCard_xmw0h_187",pe="_fullRow_xmw0h_196",m={white:Q,black:X,"light-black":"rgb(34, 34, 34)","translucid-black":"rgba(0, 0, 0, 0.06)","ghost-grey":"rgb(243, 243, 243)","bg-grey":"rgb(237, 237, 237)","note-blue":"rgb(237, 246, 253)","light-grey":"rgb(224, 224, 224)","very-light-grey":"rgb(206, 206, 206)","hover-grey":"rgb(216, 216, 216)",grey:J,"med-grey":"rgb(151, 151, 151)","greyish-brown":"rgb(74, 74, 74)","dark-grey":"rgb(112, 112, 112)","body-grey":"rgb(84, 86, 91)","pinkish-grey":"rgb(204, 204, 204)","inactive-grey":"rgb(187, 187, 187)",red:Y,"light-red":"rgb(247, 220, 220)","light-orange":"rgb(255, 236, 217)",orange:Z,"yellow-orange":"rgb(254, 191, 0)","bright-green":"rgb(209, 239, 62)","es-green":"rgb(136, 192, 75)","dark-green":"rgb(78, 108, 46)","strong-green":"rgb(145, 199, 23)","light-grayish-green":"rgb(244, 250, 232)","light-blue":"rgb(116, 193, 255)","light-grayish-blue":"rgb(207, 232, 250)","es-blue":"rgb(15, 138, 231)","med-blue":"#0b68ad","dark-blue":"rgb(11, 93, 155)","light-green-hover":"rgb(173, 212, 132)","mostly-desaturated-dark-blue":"rgb(87, 102, 117)","menu-black":"rgb(51, 51, 51)","pale-green":"rgb(244, 250, 232)","grid-bg-grey":"rgb(247, 247, 246)","royal-blue":"rgb(0, 102, 255)","light-green":"rgb(234, 245, 225)","breakline-gray":"rgb(206, 206, 206)","dark-red":"rgb(139, 0, 0)","dark-orange":"rgb(255, 140, 0)",green:ee,"medium-light-orange":"rgb(203, 105, 0)","dark-moderate-blue":"rgb(75, 73, 172)","dark-grayish-blue":"rgb(163, 164, 165)","very-light-gray":"rgb(227, 227, 227)","very-pale-white-blue":"rgb(245, 247, 255)","card-tale":"rgb(125, 160, 250)","card-dark-blue":"rgb(71, 71, 161)","card-light-blue":"rgb(121, 120, 233)","card-light-danger":"rgb(121, 120, 233)","very-light-gray-mostly-white":"rgb(245, 245, 245)","slightly-desaturated-green":"rgb(171, 210, 129)",zBase:re,zBackground:te,zPopover:se,zAgentNotes:ae,zPaymentPanelOverlay:oe,zStoreMessagingDisclaimer:ne,zModalBackground:le,zModal:ie,zTooltip:ge,zSpinner:ce,zBanner:de,zComponentSpinner:be,"base-font-family":'"Lato", Helvetica, "Lucida Grande", Arial, sans-serif',container:ue,addActionGroup:he,"is-active":"_is-active_xmw0h_173",tableGridResponsive:me,stretchCard:ye,fullRow:pe},xe="rgb(255, 255, 255)",ve="rgb(0, 0, 0)",je="rgb(204, 204, 204)",ke="rgb(199, 23, 23)",ze="rgb(254, 131, 0)",we="rgb(0, 128, 0)",$e="0",Se="900",fe="1000",Ce="1005",Ne="1030",Re="1035",_e="1040",Be="1050",Ge="1100",Pe="1200",Ae="1500",Me="950",Ue="_tableBody_6k9lv_119",Fe="_projectGrid_6k9lv_126",Le="_theadLabel_6k9lv_126",Oe="_theadBottom_6k9lv_130",p={white:xe,black:ve,"light-black":"rgb(34, 34, 34)","translucid-black":"rgba(0, 0, 0, 0.06)","ghost-grey":"rgb(243, 243, 243)","bg-grey":"rgb(237, 237, 237)","note-blue":"rgb(237, 246, 253)","light-grey":"rgb(224, 224, 224)","very-light-grey":"rgb(206, 206, 206)","hover-grey":"rgb(216, 216, 216)",grey:je,"med-grey":"rgb(151, 151, 151)","greyish-brown":"rgb(74, 74, 74)","dark-grey":"rgb(112, 112, 112)","body-grey":"rgb(84, 86, 91)","pinkish-grey":"rgb(204, 204, 204)","inactive-grey":"rgb(187, 187, 187)",red:ke,"light-red":"rgb(247, 220, 220)","light-orange":"rgb(255, 236, 217)",orange:ze,"yellow-orange":"rgb(254, 191, 0)","bright-green":"rgb(209, 239, 62)","es-green":"rgb(136, 192, 75)","dark-green":"rgb(78, 108, 46)","strong-green":"rgb(145, 199, 23)","light-grayish-green":"rgb(244, 250, 232)","light-blue":"rgb(116, 193, 255)","light-grayish-blue":"rgb(207, 232, 250)","es-blue":"rgb(15, 138, 231)","med-blue":"#0b68ad","dark-blue":"rgb(11, 93, 155)","light-green-hover":"rgb(173, 212, 132)","mostly-desaturated-dark-blue":"rgb(87, 102, 117)","menu-black":"rgb(51, 51, 51)","pale-green":"rgb(244, 250, 232)","grid-bg-grey":"rgb(247, 247, 246)","royal-blue":"rgb(0, 102, 255)","light-green":"rgb(234, 245, 225)","breakline-gray":"rgb(206, 206, 206)","dark-red":"rgb(139, 0, 0)","dark-orange":"rgb(255, 140, 0)",green:we,"medium-light-orange":"rgb(203, 105, 0)","dark-moderate-blue":"rgb(75, 73, 172)","dark-grayish-blue":"rgb(163, 164, 165)","very-light-gray":"rgb(227, 227, 227)","very-pale-white-blue":"rgb(245, 247, 255)","card-tale":"rgb(125, 160, 250)","card-dark-blue":"rgb(71, 71, 161)","card-light-blue":"rgb(121, 120, 233)","card-light-danger":"rgb(121, 120, 233)","very-light-gray-mostly-white":"rgb(245, 245, 245)","slightly-desaturated-green":"rgb(171, 210, 129)",zBase:$e,zBackground:Se,zPopover:fe,zAgentNotes:Ce,zPaymentPanelOverlay:Ne,zStoreMessagingDisclaimer:Re,zModalBackground:_e,zModal:Be,zTooltip:Ge,zSpinner:Pe,zBanner:Ae,zComponentSpinner:Me,"base-font-family":'"Lato", Helvetica, "Lucida Grande", Arial, sans-serif',tableBody:Ue,projectGrid:Fe,theadLabel:Le,theadBottom:Oe},d=({row:s,children:t,handleOnDrawerOpen:c,getKey:l})=>e.jsx("div",{className:a.table,children:e.jsx("div",{className:a.row,children:e.jsx("div",{tabIndex:0,className:a.heading,onClick:()=>{c&&c(s)},"data-qa":`${l(s)}-grid-row`,children:t})})}),De=({value:s,style:t})=>e.jsx("div",{className:`${a.column}`,style:t,children:e.jsx("div",{className:a.content,children:e.jsx("span",{children:s})})}),Te=({style:s,children:t})=>e.jsx("div",{className:`${a.column}`,style:s,children:e.jsx("div",{className:a.content,children:t})}),Ie=({onEdit:s,onDelete:t})=>e.jsx("div",{className:a.actions,style:{width:100},children:e.jsxs("div",{className:a.actionsInnerContainer,children:[e.jsx(k,{icon:O,style:{padding:"0.125rem"},onClick:s}),e.jsx(k,{icon:D,style:{padding:"0.125rem"},onClick:t})]})});d.Row=De;d.CustomRowValue=Te;d.Actions=Ie;const Ve=()=>({pipeRowValueFormatter:s=>S.replacePipeToNewHtmlLine(s).map((t,c)=>e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx("span",{children:t})},`${t}-${c}`)),periodRowValueFormatter:s=>S.replacePeriodToNewHtmlLine(s).map((t,c)=>e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx("span",{children:t})},`${t}-${c}`)),alertTextColorRowFormatter:(s,t)=>e.jsx("div",{className:a.status,style:{width:"auto"},children:e.jsx("span",{className:`${a[t]}`,children:s})}),customStyleClassRowFormatter:(s,t)=>e.jsx("span",{className:t,children:s})}),We=s=>{switch(s){case"1":return"Administrator";case"2":return"Developer";default:return"ReadOnly"}},Ee=()=>{const{pipeRowValueFormatter:s}=Ve(),t={pipeFormatter:(l,o)=>{const n=l[o];return["list"].includes(o)?s(`${n}`):""},avatarFormatter:(l,o)=>{const n=l[o];return o==="urlPhoto"?e.jsx(T,{url:`${n}`,alt:`image of user ${n} ${n}`}):""},rolFormatter:(l,o)=>{const n=l[o];return o==="rol"?e.jsx("span",{children:We(`${n}`)}):""}};return{headers:[{name:"urlPhoto",label:"",style:{minWidth:"150px"},rowFormatter:t.avatarFormatter},{name:"name",label:"Nombre",isSortable:!0,style:{minWidth:"150px"}},{name:"lastName",label:"Apellido",isSortable:!0,style:{minWidth:"150px"}},{name:"rol",label:"Rol",isSortable:!0,style:{minWidth:"150px"},rowFormatter:t.rolFormatter},{name:"list",label:"TecnologÃ­as",isSortable:!0,style:{minWidth:"150px"},rowFormatter:t.pipeFormatter},{name:"area",label:"Area",isSortable:!0,style:{minWidth:"100px"}}],projectGridRowFormatter:(l,o)=>{const n=o==null?void 0:o.filter(u=>u.developers.includes(`${l.name} ${l.lastName}`)),b=n==null?void 0:n.map(u=>u.projectName);return n&&b?s(b.join("|")):""}}},He=({isCreateUserModalOpen:s,closeCreateUserModal:t})=>{const[c,l]=g.useState(!1),[o,n]=g.useState([]),[b,u]=g.useState("id"),[x,z]=g.useState(!1),[N,R]=g.useState(!1),[_,B]=g.useState(),[G,P]=g.useState(),{headers:w,projectGridRowFormatter:A}=Ee(),v=r=>r===b,M=r=>{v(r)?z(!x):(u(r),z(!1))},U=r=>v(r)?a.activeSorter:a.sortable,$=b?E(o,b,x,b==="name"?K:void 0):o,j=g.useCallback(async()=>{l(!0);try{const r=await I();n(r)}catch{console.log("error")}l(!1)},[]),F=async r=>{try{await W(r),j()}catch{console.log("removeuser-Error")}},L=r=>{B(r),R(!0)};return g.useEffect(()=>{j()},[j]),g.useEffect(()=>{(async()=>{try{const i=await q();P(i)}catch{console.log("GetProjects-error")}})()},[]),e.jsxs("div",{className:p.userGrid,children:[e.jsxs("div",{className:a.table,children:[e.jsx("div",{className:`${a.thead} ${p.theadBottom} ${p.theadLabel}`,children:e.jsxs("div",{className:a.tr,children:[w.map(({name:r,label:i,isSortable:h,style:y})=>e.jsxs("div",{className:`${U(r)}`,style:y,onClick:()=>h?M(r):void 0,"data-qa":`${r}-sort-button`,children:[e.jsx("span",{children:i}),h&&e.jsx(k,{icon:H(v(r),!x)})]},r)),e.jsx("div",{style:{minWidth:"150px"},"data-qa":"projects-sort-button",children:e.jsx("span",{children:"Proyectos"})},"projects"),e.jsx("div",{className:a.headingActions,style:{width:100}})]})}),$.length===0&&!c&&e.jsx("div",{className:a.noResultsMessage,children:"No Results Were Found"}),e.jsx("div",{className:p.tableBody,children:$.map(r=>e.jsxs(d,{row:r,getKey:i=>`${i.id}-user`,children:[w.map(({name:i,style:h,rowFormatter:y})=>y?e.jsx(d.CustomRowValue,{style:h,children:y(r,i)},i):e.jsx(d.Row,{value:r[i],style:h},i)),e.jsx(d.Row,{value:A(r,G),style:{minWidth:"150px"}}),e.jsx(d.Actions,{onEdit:()=>L(r.id),onDelete:()=>F(r.id)})]},`${r.id}-grid-row`))})]}),e.jsx(V,{show:c,text:"...Loading Users"}),s&&e.jsx("span",{onClick:t}),N&&e.jsx("span",{onClick:()=>_})]})},Je=()=>{const[s,t]=g.useState(!1);return g.useEffect(()=>{document.title="OLS user"},[]),e.jsx("div",{className:m.container,children:e.jsx("div",{className:`${m.fullRow} ${m.stretchCard}`,children:e.jsxs(C,{width:"100%",children:[e.jsx(C.Header,{title:f.UserPageTitle}),e.jsx("div",{className:m.addActionGroup,children:e.jsx("button",{type:"submit",onClick:()=>t(!0),children:f.UserPageAddButton})}),e.jsx("div",{className:m.tableGridResponsive,children:e.jsx(He,{isCreateUserModalOpen:s,closeCreateUserModal:()=>t(!1)})})]})})})};export{Je as default};
